<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام سطح مكتب بسيط</title>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Inter Font from Google Fonts for better typography -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            /* Prevent scrolling and ensure full-screen desktop feel */
            overflow: hidden;
            /* Flexbox for main layout: desktop area grows, taskbar is fixed at bottom */
            display: flex;
            flex-direction: column;
            min-height: 100vh; /* Ensure body takes full viewport height */
            /* Background image and styling for the desktop */
            background-image: url('https://placehold.co/1920x1080/0d131a/b6b6b6?text=KALI+LINUX+BACKGROUND'); /* Placeholder for Kali Linux-like background */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }
        /* Custom styles for draggable elements */
        .draggable {
            cursor: grab; /* Indicate element can be dragged */
            user-select: none; /* Prevent text selection during drag */
        }
        .draggable.dragging {
            cursor: grabbing; /* Indicate element is being dragged */
        }
        /* Basic styling for calculator buttons */
        .calc-btn {
            @apply rounded-lg shadow-md transition duration-150 ease-in-out transform;
            @apply hover:scale-105 active:scale-95; /* Subtle scale effect on hover/active */
            display: flex; /* Use flex to center content */
            justify-content: center;
            align-items: center;
        }
        /* Animation for app appearance/disappearance */
        .app-visible {
            animation: showApp 0.3s forwards;
        }
        .app-hidden {
            animation: hideApp 0.3s forwards;
        }
        @keyframes showApp {
            from { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            to { transform: translate(-50%, -50%) scale(1); opacity: 1; }
        }
        @keyframes hideApp {
            from { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            to { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
        }

        /* Styles for the Start Menu */
        #startMenu {
            position: absolute;
            bottom: 56px; /* Adjust to sit above the taskbar (h-14 = 56px) */
            right: 0px; /* Position to the far right, matching rtl direction */
            width: 280px;
            max-height: calc(100vh - 70px); /* Max height to fit screen, leaving some margin */
            overflow-y: auto; /* Enable scrolling for programs list if it gets long */
            transform-origin: bottom right; /* For scaling animation */
            transition: transform 0.2s ease-out, opacity 0.2s ease-out;
            z-index: 40; /* Below app windows, above taskbar */
        }
        #startMenu.start-menu-visible {
            transform: scale(1);
            opacity: 1;
            display: block;
        }
        #startMenu.start-menu-hidden {
            transform: scale(0.8);
            opacity: 0;
            display: none; /* Hide after animation */
        }
        /* Style for programs list items */
        .program-item {
            @apply p-2 hover:bg-gray-600 rounded-md cursor-pointer flex items-center space-x-2 rtl:space-x-reverse;
        }
        .program-item svg {
            @apply w-5 h-5;
        }
    </style>
</head>
<body class="text-white">

    <!-- Desktop Area - Flexible height to fill space above taskbar -->
    <div class="flex-grow relative flex items-center justify-center p-4">
        <!-- Calculator Application Window -->
        <div id="calculatorApp"
             class="absolute bg-gray-700 rounded-lg shadow-2xl p-4
                    transition-transform duration-300 ease-in-out
                    scale-0 opacity-0 hidden flex flex-col"
             style="width: 280px; z-index: 100; top: 50%; left: 50%; transform: translate(-50%, -50%);">

            <!-- Calculator Header - Draggable Area -->
            <div class="flex justify-between items-center bg-gray-800 text-white p-2 rounded-t-lg draggable" id="calculatorHeader">
                <span class="text-sm font-semibold">الآلة الحاسبة</span>
                <!-- Close Button -->
                <button class="text-gray-400 hover:text-white transition-colors duration-200" onclick="toggleCalculator()">
                    <!-- SVG for 'X' icon -->
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>

            <!-- Calculator Body - Display and Buttons -->
            <div class="p-2 flex-grow">
                <!-- Calculator Display -->
                <input type="text" id="calcDisplay"
                       class="w-full h-12 text-right text-3xl mb-2
                              bg-gray-900 text-white rounded-md p-2 focus:outline-none
                              font-mono overflow-hidden"
                       value="0" readonly>

                <!-- Calculator Buttons Grid -->
                <div class="grid grid-cols-4 gap-2">
                    <!-- Clear button -->
                    <button class="calc-btn col-span-2 bg-red-600 hover:bg-red-700 active:bg-red-800 text-white text-xl p-4" onclick="clearDisplay()">C</button>
                    <!-- Operators -->
                    <button class="calc-btn bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white text-xl p-4" onclick="appendOperator('/')">/</button>
                    <button class="calc-btn bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white text-xl p-4" onclick="appendOperator('*')">×</button>

                    <!-- Numbers 7, 8, 9 -->
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('7')">7</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('8')">8</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('9')">9</button>
                    <button class="calc-btn bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white text-xl p-4" onclick="appendOperator('-')">-</button>

                    <!-- Numbers 4, 5, 6 -->
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('4')">4</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('5')">5</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('6')">6</button>
                    <button class="calc-btn bg-gray-500 hover:bg-gray-600 active:bg-gray-700 text-white text-xl p-4" onclick="appendOperator('+')">+</button>

                    <!-- Numbers 1, 2, 3 -->
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('1')">1</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('2')">2</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('3')">3</button>
                    <!-- Equals button - spans 2 rows -->
                    <button class="calc-btn bg-blue-600 hover:bg-blue-700 active:bg-blue-800 text-white text-xl p-4 row-span-2" onclick="calculateResult()">=</button>

                    <!-- Numbers 0, decimal point -->
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4 col-span-2" onclick="appendNumber('0')">0</button>
                    <button class="calc-btn bg-gray-600 hover:bg-gray-700 active:bg-gray-800 text-white text-xl p-4" onclick="appendNumber('.')">.</button>
                </div>
            </div>
        </div>

        <!-- Start Menu -->
        <div id="startMenu" class="bg-gray-800 rounded-t-lg shadow-2xl p-4 hidden">
            <div class="mb-4">
                <input type="text" id="programSearch"
                       class="w-full p-2 rounded-md bg-gray-900 text-white focus:outline-none focus:ring-2 focus:ring-blue-500"
                       placeholder="ابحث عن برامج..." onkeyup="searchPrograms()">
            </div>
            <div id="programList" class="flex flex-col space-y-2">
                <!-- Program items will be rendered here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Taskbar at the bottom of the screen -->
    <div class="w-full bg-gray-900 h-14 flex items-center px-4 shadow-lg border-t border-gray-700 z-50">
        <!-- Start Button (Falcon Logo) - Aligned to the right in RTL -->
        <button class="flex items-center justify-center p-2 rounded-lg hover:bg-gray-700 transition duration-200 ml-4" onclick="toggleStartMenu()">
            <!-- Purple Falcon SVG Icon (Placeholder for now, can be replaced with more complex SVG) -->
            <svg class="w-8 h-8 text-purple-500" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15l-3.5-3.5 1-1 2.5 2.5 5.5-5.5 1 1-6.5 6.5z"/>
                <!-- This is a placeholder icon (check mark inside circle). Replace with an actual falcon SVG if available. -->
                <!-- For a falcon, a more complex path would be needed. This simple one is just to demonstrate color/size. -->
                <!-- Example of a more 'falcon-like' simple SVG path (conceptual, needs refinement): -->
                <!-- <path d="M12 2C9.5 2 7.2 3.5 6 6s-1 6 0 9l6 7 6-7c1-3 0-6.5-1-9S14.5 2 12 2zM12 10a2 2 0 100-4 2 2 0 000 4z"/> -->
            </svg>
        </button>

        <div class="flex flex-grow justify-center space-x-4 rtl:space-x-reverse">
            <!-- Calculator Icon/Button in the Taskbar -->
            <button class="flex flex-col items-center justify-center p-2 rounded-lg hover:bg-gray-700 transition duration-200" onclick="launchApp('calculator')">
                <!-- Calculator Icon (SVG) -->
                <svg class="w-6 h-6 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v4m0 0H9m0 0h3m-3 0h3m-3 0V7m3 0V4m0 3v3m0 0V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3V4m0 3Pz
